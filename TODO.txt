use errno
check improved_exit, it causes double free if you're not in a child!
remove type casted vars to void
